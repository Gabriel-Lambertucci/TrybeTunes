{"ast":null,"code":"import _regeneratorRuntime from\"/home/gabriel/Trybe/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/gabriel/Trybe/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/gabriel/Trybe/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/gabriel/Trybe/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/gabriel/Trybe/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/gabriel/Trybe/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Header from'../components/Header';import MusicCard from'../components/MusicCard';import getMusics from'../services/musicsAPI';import{addSong,getFavoriteSongs,removeSong}from'../services/favoriteSongsAPI';import'../Style/Album.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var carregando='Carregando...';var Album=/*#__PURE__*/function(_Component){_inherits(Album,_Component);var _super=_createSuper(Album);function Album(){var _this;_classCallCheck(this,Album);_this=_super.call(this);_this.onChangeHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(target,ApiObject){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.checked=target.checked;_this.setState({loading:carregando});if(!(_this.checked===true)){_context.next=6;break;}_this.inputTarget.push(ApiObject);_context.next=6;return addSong(ApiObject);case 6:if(!(_this.checked===false)){_context.next=10;break;}_this.inputTarget=_this.inputTarget.filter(function(item){return item.trackName!==target.id;});_context.next=10;return removeSong(ApiObject);case 10:_this.setState({loading:'off'});case 11:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();_this.showArtist=function(){var ApiResult=_this.state.ApiResult;if(ApiResult.length>0){_this.artist=ApiResult[0].artistName;_this.album=ApiResult[0].albumName;}return _this.artist;};_this.showAlbum=function(){var ApiResult=_this.state.ApiResult;if(ApiResult.length>0){_this.album=ApiResult[0].collectionName;}return _this.album;};_this.inputTargetChecked=function(trackName){var result=_this.inputTarget.some(function(item){return item.trackName===trackName;});return result;};_this.showMusics=function(){var state=_this.props.location.state;var _this$state=_this.state,ApiResult=_this$state.ApiResult,loading=_this$state.loading;if(loading==='off'){return/*#__PURE__*/_jsxs(\"div\",{id:\"page-album\",\"data-testid\":\"page-album\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"div1\",children:[/*#__PURE__*/_jsx(\"img\",{src:state,alt:\"Album\"}),/*#__PURE__*/_jsx(\"h3\",{\"data-testid\":\"album-name\",children:_this.showAlbum()}),/*#__PURE__*/_jsx(\"h4\",{\"data-testid\":\"artist-name\",children:_this.showArtist()})]}),/*#__PURE__*/_jsx(\"div\",{id:\"div2\",children:ApiResult.lenght!==0?ApiResult.map(function(item,index){return/*#__PURE__*/_jsx(MusicCard,{ApiObject:item,trackId:item.trackId,trackName:item.trackName,previewUrl:item.previewUrl,onChange:_this.onChangeHandler,checked:_this.inputTargetChecked(item.trackName)},index);}):null})]});}if(loading===carregando||loading===''){return/*#__PURE__*/_jsx(\"h2\",{children:carregando});}};_this.inputTarget=[];_this.checked='';_this.artist='';_this.album='';_this.state={ApiResult:[],loading:''};return _this;}_createClass(Album,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var location,pathname,id,result;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:location=this.props.location;pathname=location.pathname;id=pathname.replace(/[^0-9]/g,'');_context2.next=5;return getMusics(id);case 5:result=_context2.sent;_context2.next=8;return getFavoriteSongs();case 8:this.inputTarget=_context2.sent;this.setState({ApiResult:result,loading:'off'});case 10:case\"end\":return _context2.stop();}}},_callee2,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),this.showMusics()]});}}]);return Album;}(Component);Album.defaultProps={pathname:undefined};export default Album;","map":{"version":3,"sources":["/home/gabriel/Trybe/TrybeTunes/src/pages/Album.js"],"names":["React","Component","Header","MusicCard","getMusics","addSong","getFavoriteSongs","removeSong","carregando","Album","onChangeHandler","target","ApiObject","checked","setState","loading","inputTarget","push","filter","item","trackName","id","showArtist","ApiResult","state","length","artist","artistName","album","albumName","showAlbum","collectionName","inputTargetChecked","result","some","showMusics","props","location","lenght","map","index","trackId","previewUrl","pathname","replace","defaultProps","undefined"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport Header from '../components/Header';\nimport MusicCard from '../components/MusicCard';\nimport getMusics from '../services/musicsAPI';\nimport { addSong, getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport '../Style/Album.css';\n\nconst carregando = 'Carregando...';\n\nclass Album extends Component {\n  constructor() {\n    super();\n    this.inputTarget = [];\n    this.checked = '';\n    this.artist = '';\n    this.album = '';\n    this.state = {\n      ApiResult: [],\n      loading: '',\n    };\n  }\n\n  async componentDidMount() {\n    const { location } = this.props;\n    const { pathname } = location;\n    const id = pathname.replace(/[^0-9]/g, '');\n    const result = await getMusics(id);\n    this.inputTarget = await getFavoriteSongs();\n    this.setState({ ApiResult: result, loading: 'off' });\n  }\n\n  onChangeHandler = async (target, ApiObject) => {\n    this.checked = target.checked;\n    this.setState({ loading: carregando });\n    if (this.checked === true) {\n      this.inputTarget.push(ApiObject);\n      await addSong(ApiObject);\n    }\n    if (this.checked === false) {\n      this.inputTarget = this.inputTarget.filter((item) => item.trackName !== target.id);\n      await removeSong(ApiObject);\n    }\n    this.setState({ loading: 'off' });\n  }\n\n  showArtist = () => {\n    const { ApiResult } = this.state;\n    if (ApiResult.length > 0) {\n      this.artist = ApiResult[0].artistName;\n      this.album = ApiResult[0].albumName;\n    }\n    return (\n      this.artist\n    );\n  }\n\n  showAlbum = () => {\n    const { ApiResult } = this.state;\n    if (ApiResult.length > 0) {\n      this.album = ApiResult[0].collectionName;\n    }\n    return (\n      this.album\n    );\n  }\n\n  inputTargetChecked = (trackName) => {\n    const result = this.inputTarget.some((item) => item.trackName === trackName);\n    return result;\n  }\n\n  showMusics = () => {\n    const { location: { state } } = this.props;\n    const { ApiResult, loading } = this.state;\n    if (loading === 'off') {\n      return (\n        <div id=\"page-album\" data-testid=\"page-album\">\n          <div id=\"div1\">\n            <img src={ state } alt=\"Album\" />\n            <h3 data-testid=\"album-name\">{this.showAlbum()}</h3>\n            <h4 data-testid=\"artist-name\">{this.showArtist()}</h4>\n          </div>\n          <div id=\"div2\">\n            {ApiResult.lenght !== 0\n              ? ApiResult.map((item, index) => (\n                <MusicCard\n                  ApiObject={ item }\n                  trackId={ item.trackId }\n                  key={ index }\n                  trackName={ item.trackName }\n                  previewUrl={ item.previewUrl }\n                  onChange={ this.onChangeHandler }\n                  checked={ this.inputTargetChecked(item.trackName) }\n                />)) : null }\n          </div>\n        </div>\n      );\n    } if (loading === carregando || loading === '') {\n      return (\n        <h2>{ carregando }</h2>\n      );\n    }\n  }\n\n  render() {\n    return (\n      <>\n        <Header />\n        {this.showMusics()}\n      </>\n    );\n  }\n}\n\nAlbum.defaultProps = {\n  pathname: undefined,\n};\n\nAlbum.propTypes = {\n  location: PropTypes.objectOf(PropTypes.shape()).isRequired,\n  pathname: PropTypes.string,\n};\n\nexport default Album;\n"]},"metadata":{},"sourceType":"module"}