{"ast":null,"code":"import _regeneratorRuntime from\"/home/gabriel/Trybe/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/gabriel/Trybe/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/gabriel/Trybe/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/gabriel/Trybe/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/gabriel/Trybe/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/gabriel/Trybe/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from'react-router-dom';import Header from'../components/Header';import searchAlbumsAPI from'../services/searchAlbumsAPI';import'../Style/Search.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Search=/*#__PURE__*/function(_Component){_inherits(Search,_Component);var _super=_createSuper(Search);function Search(){var _this;_classCallCheck(this,Search);_this=_super.call(this);_this.handleClick=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var inputContent,result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:inputContent=_this.state.inputContent;_this.setState({buttonDisabled:true,showTags:false,loading:'Carregando...',inputContent:''});_context.next=4;return searchAlbumsAPI(inputContent);case 4:result=_context.sent;_this.setState({showTags:'',apiArray:result});case 6:case\"end\":return _context.stop();}}},_callee);}));_this.showOrNot=function(){var _this$state=_this.state,buttonDisabled=_this$state.buttonDisabled,inputContent=_this$state.inputContent,showTags=_this$state.showTags;var _this$state2=_this.state,loading=_this$state2.loading,apiArray=_this$state2.apiArray;if(showTags){return/*#__PURE__*/_jsxs(\"form\",{autoComplete:\"off\",className:\"search-div\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"artist-input\",onChange:_this.handleChange,\"data-testid\":\"search-artist-input\",id:\"artist-input\",placeholder:\"Nome do artista\",type:\"text\",value:inputContent}),/*#__PURE__*/_jsx(\"button\",{className:\"artist-button\",disabled:buttonDisabled,\"data-testid\":\"search-artist-button\",type:\"button\",onClick:_this.handleClick,children:\"Procurar\"})]});}if(showTags===false){return/*#__PURE__*/_jsx(\"h2\",{id:\"loading\",children:loading});}if(showTags===''){if(apiArray.length===0){return/*#__PURE__*/_jsx(\"h3\",{children:\"Nenhum \\xE1lbum foi encontrado\"});}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"form\",{autoComplete:\"off\",className:\"search-div\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"artist-input\",onChange:_this.handleChange,\"data-testid\":\"search-artist-input\",id:\"artist-input\",placeholder:\"Nome do artista\",type:\"text\",value:inputContent}),/*#__PURE__*/_jsx(\"button\",{className:\"artist-button\",disabled:buttonDisabled,\"data-testid\":\"search-artist-button\",type:\"button\",onClick:_this.handleClick,children:\"Procurar\"})]}),/*#__PURE__*/_jsx(\"h3\",{id:\"results\",children:\"Resultado de \\xE1lbuns de  \\n            \".concat(_this.content)}),/*#__PURE__*/_jsx(\"div\",{className:\"albums-div\",children:apiArray.map(function(item){return/*#__PURE__*/_jsxs(\"div\",{className:\"album\",children:[/*#__PURE__*/_jsx(\"img\",{src:item.artworkUrl100,alt:item.artistName}),/*#__PURE__*/_jsx(\"p\",{id:\"artistName\",children:item.artistName}),/*#__PURE__*/_jsx(Link,{className:\"link\",to:{pathname:\"/album/\".concat(item.collectionId),state:item.artworkUrl100},\"data-testid\":\"link-to-album-\".concat(item.collectionId),children:item.collectionName})]},item.collectionId);})})]});}};_this.updateContent=function(){var inputContent=_this.state.inputContent;_this.content=inputContent;};_this.handleChange=function(_ref2){var target=_ref2.target;if(target.value.length<2){_this.setState({buttonDisabled:true,inputContent:target.value},_this.updateContent);}else{_this.setState({buttonDisabled:false,inputContent:target.value},_this.updateContent);}};_this.content='';_this.state={buttonDisabled:true,inputContent:'',showTags:true,apiArray:[],loading:''};return _this;}_createClass(Search,[{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"main\",{id:\"main-content\",\"data-testid\":\"page-search\",children:[/*#__PURE__*/_jsx(Header,{}),this.showOrNot()]});}}]);return Search;}(Component);export default Search;","map":{"version":3,"sources":["/home/gabriel/Trybe/TrybeTunes/src/pages/Search.js"],"names":["React","Component","Link","Header","searchAlbumsAPI","Search","handleClick","inputContent","state","setState","buttonDisabled","showTags","loading","result","apiArray","showOrNot","handleChange","length","content","map","item","artworkUrl100","artistName","pathname","collectionId","collectionName","updateContent","target","value"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Header from '../components/Header';\nimport searchAlbumsAPI from '../services/searchAlbumsAPI';\nimport '../Style/Search.css';\n\nclass Search extends Component {\n  constructor() {\n    super();\n    this.content = '';\n    this.state = {\n      buttonDisabled: true,\n      inputContent: '',\n      showTags: true,\n      apiArray: [],\n      loading: '',\n    };\n  }\n\n  handleClick = async () => {\n    const { inputContent } = this.state;\n    this.setState({\n      buttonDisabled: true,\n      showTags: false,\n      loading: 'Carregando...',\n      inputContent: '',\n    });\n    const result = await searchAlbumsAPI(inputContent);\n    this.setState({\n      showTags: '',\n      apiArray: result,\n    });\n  };\n\n  showOrNot = () => {\n    const { buttonDisabled, inputContent, showTags } = this.state;\n    const { loading, apiArray } = this.state;\n    if (showTags) {\n      return (\n        <form autoComplete=\"off\" className=\"search-div\">\n          <input\n            className=\"artist-input\"\n            onChange={ this.handleChange }\n            data-testid=\"search-artist-input\"\n            id=\"artist-input\"\n            placeholder=\"Nome do artista\"\n            type=\"text\"\n            value={ inputContent }\n          />\n          <button\n            className=\"artist-button\"\n            disabled={ buttonDisabled }\n            data-testid=\"search-artist-button\"\n            type=\"button\"\n            onClick={ this.handleClick }\n          >\n            Procurar\n          </button>\n        </form>\n      );\n    }\n    if (showTags === false) {\n      return <h2 id=\"loading\">{loading}</h2>;\n    }\n    if (showTags === '') {\n      if (apiArray.length === 0) {\n        return <h3>Nenhum álbum foi encontrado</h3>;\n      }\n      return (\n        <>\n          <form autoComplete=\"off\" className=\"search-div\">\n            <input\n              className=\"artist-input\"\n              onChange={ this.handleChange }\n              data-testid=\"search-artist-input\"\n              id=\"artist-input\"\n              placeholder=\"Nome do artista\"\n              type=\"text\"\n              value={ inputContent }\n            />\n            <button\n              className=\"artist-button\"\n              disabled={ buttonDisabled }\n              data-testid=\"search-artist-button\"\n              type=\"button\"\n              onClick={ this.handleClick }\n            >\n              Procurar\n            </button>\n          </form>\n          <h3 id=\"results\">\n            {`Resultado de álbuns de  \n            ${this.content}`}\n          </h3>\n          <div className=\"albums-div\">\n            {apiArray.map((item) => (\n              <div className=\"album\" key={ item.collectionId }>\n                <img src={ item.artworkUrl100 } alt={ item.artistName } />\n                <p id=\"artistName\">{item.artistName}</p>\n                <Link\n                  className=\"link\"\n                  to={ {\n                    pathname: `/album/${item.collectionId}`,\n                    state: item.artworkUrl100,\n                  } }\n                  data-testid={ `link-to-album-${item.collectionId}` }\n                >\n                  {item.collectionName}\n                </Link>\n              </div>\n            ))}\n          </div>\n        </>\n      );\n    }\n  };\n\n  updateContent = () => {\n    const { inputContent } = this.state;\n    this.content = inputContent;\n  }\n\n  handleChange = ({ target }) => {\n    if (target.value.length < 2) {\n      this.setState(\n        {\n          buttonDisabled: true,\n          inputContent: target.value,\n        },\n        this.updateContent,\n      );\n    } else {\n      this.setState(\n        {\n          buttonDisabled: false,\n          inputContent: target.value,\n        },\n        this.updateContent,\n      );\n    }\n  }\n\n  render() {\n    return (\n      <main id=\"main-content\" data-testid=\"page-search\">\n        <Header />\n        {this.showOrNot()}\n      </main>\n    );\n  }\n}\n\nexport default Search;\n"]},"metadata":{},"sourceType":"module"}