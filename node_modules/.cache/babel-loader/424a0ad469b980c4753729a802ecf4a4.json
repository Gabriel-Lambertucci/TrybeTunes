{"ast":null,"code":"import _regeneratorRuntime from\"/home/gabriel/Trybe/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/gabriel/Trybe/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/gabriel/Trybe/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/gabriel/Trybe/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/gabriel/Trybe/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/gabriel/Trybe/TrybeTunes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import Header from'../components/Header';import{getFavoriteSongs,removeSong}from'../services/favoriteSongsAPI';import MusicCard from'../components/MusicCard';import'../Style/Favorites.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var carregando='Carregando...';var Favorites=/*#__PURE__*/function(_Component){_inherits(Favorites,_Component);var _super=_createSuper(Favorites);function Favorites(){var _this;_classCallCheck(this,Favorites);_this=_super.call(this);_this.onChangeHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(__target,musicObject){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_this.setState({loading:carregando});_context.next=3;return removeSong(musicObject);case 3:_context.next=5;return getFavoriteSongs();case 5:result=_context.sent;_this.setState({ApiResult:result,loading:'off'});case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x,_x2){return _ref.apply(this,arguments);};}();_this.onClickHandler=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var ApiResult;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:ApiResult=_this.state.ApiResult;_this.setState({loading:carregando});if(ApiResult.length>0){ApiResult.forEach(/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(item){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:return _context2.abrupt(\"return\",removeSong(item));case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x3){return _ref3.apply(this,arguments);};}());}_this.setState({ApiResult:[],loading:'off'});case 4:case\"end\":return _context3.stop();}}},_callee3);}));_this.state={ApiResult:[],loading:carregando};return _this;}_createClass(Favorites,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var result;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:this.setState({loading:carregando});_context4.next=3;return getFavoriteSongs();case 3:result=_context4.sent;this.setState({ApiResult:result,loading:'off'});case 5:case\"end\":return _context4.stop();}}},_callee4,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"showFavoriteSongs\",value:function showFavoriteSongs(){var _this2=this;var _this$state=this.state,loading=_this$state.loading,ApiResult=_this$state.ApiResult;if(loading==='off'){return/*#__PURE__*/_jsxs(\"div\",{id:\"page-favorites\",\"data-testid\":\"page-favorites\",children:[ApiResult.map(function(item,index){return/*#__PURE__*/_jsx(MusicCard,{ApiObject:item,trackId:item.trackId,trackName:item.trackName,previewUrl:item.previewUrl,onChange:_this2.onChangeHandler,checked:\"checked\"},index);}),ApiResult.length!==0?/*#__PURE__*/_jsx(\"button\",{id:\"remove-favorites-button\",type:\"button\",onClick:this.onClickHandler,children:\"Remover favoritas\"}):/*#__PURE__*/_jsx(\"h2\",{children:\"N\\xE3o h\\xE1 m\\xFAsicas favoritas!\"})]});}if(loading===carregando){return/*#__PURE__*/_jsx(\"h2\",{children:\"Carregando...\"});}}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Header,{}),this.showFavoriteSongs()]});}}]);return Favorites;}(Component);export default Favorites;","map":{"version":3,"sources":["/home/gabriel/Trybe/TrybeTunes/src/pages/Favorites.js"],"names":["React","Component","Header","getFavoriteSongs","removeSong","MusicCard","carregando","Favorites","onChangeHandler","__target","musicObject","setState","loading","result","ApiResult","onClickHandler","state","length","forEach","item","map","index","trackId","trackName","previewUrl","showFavoriteSongs"],"mappings":"22BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,MAAP,KAAmB,sBAAnB,CACA,OAASC,gBAAT,CAA2BC,UAA3B,KAA6C,8BAA7C,CACA,MAAOC,CAAAA,SAAP,KAAsB,yBAAtB,CACA,MAAO,wBAAP,C,6IAEA,GAAMC,CAAAA,UAAU,CAAG,eAAnB,C,GAEMC,CAAAA,S,sGACJ,oBAAc,2CACZ,wBADY,MAcdC,eAdc,0FAcI,iBAAOC,QAAP,CAAiBC,WAAjB,6HAChB,MAAKC,QAAL,CAAc,CAAEC,OAAO,CAAEN,UAAX,CAAd,EADgB,sBAEVF,CAAAA,UAAU,CAACM,WAAD,CAFA,8BAGKP,CAAAA,gBAAgB,EAHrB,QAGVU,MAHU,eAIhB,MAAKF,QAAL,CAAc,CAAEG,SAAS,CAAED,MAAb,CAAqBD,OAAO,CAAE,KAA9B,CAAd,EAJgB,sDAdJ,yEAqBdG,cArBc,sEAqBG,sJACPD,SADO,CACO,MAAKE,KADZ,CACPF,SADO,CAEf,MAAKH,QAAL,CAAc,CAAEC,OAAO,CAAEN,UAAX,CAAd,EACA,GAAIQ,SAAS,CAACG,MAAV,CAAmB,CAAvB,CAA0B,CACxBH,SAAS,CAACI,OAAV,2FAAkB,kBAAOC,IAAP,uJAAgBf,UAAU,CAACe,IAAD,CAA1B,0DAAlB,kEACD,CACD,MAAKR,QAAL,CAAc,CAAEG,SAAS,CAAE,EAAb,CAAiBF,OAAO,CAAE,KAA1B,CAAd,EANe,wDArBH,GAEZ,MAAKI,KAAL,CAAa,CACXF,SAAS,CAAE,EADA,CAEXF,OAAO,CAAEN,UAFE,CAAb,CAFY,aAMb,C,iJAED,mJACE,KAAKK,QAAL,CAAc,CAAEC,OAAO,CAAEN,UAAX,CAAd,EADF,uBAEuBH,CAAAA,gBAAgB,EAFvC,QAEQU,MAFR,gBAGE,KAAKF,QAAL,CAAc,CAAEG,SAAS,CAAED,MAAb,CAAqBD,OAAO,CAAE,KAA9B,CAAd,EAHF,6D,8IAsBA,4BAAoB,iBAClB,gBAA+B,KAAKI,KAApC,CAAQJ,OAAR,aAAQA,OAAR,CAAiBE,SAAjB,aAAiBA,SAAjB,CACA,GAAIF,OAAO,GAAK,KAAhB,CAAuB,CACrB,mBACE,aAAK,EAAE,CAAC,gBAAR,CAAyB,cAAY,gBAArC,WACGE,SAAS,CAACM,GAAV,CAAc,SAACD,IAAD,CAAOE,KAAP,qBACb,KAAC,SAAD,EACE,SAAS,CAAGF,IADd,CAEE,OAAO,CAAGA,IAAI,CAACG,OAFjB,CAIE,SAAS,CAAGH,IAAI,CAACI,SAJnB,CAKE,UAAU,CAAGJ,IAAI,CAACK,UALpB,CAME,QAAQ,CAAG,MAAI,CAAChB,eANlB,CAOE,OAAO,CAAC,SAPV,EAGQa,KAHR,CADa,EAAd,CADH,CAWGP,SAAS,CAACG,MAAV,GAAqB,CAArB,cAEG,eACE,EAAE,CAAC,yBADL,CAEE,IAAI,CAAC,QAFP,CAGE,OAAO,CAAG,KAAKF,cAHjB,+BAFH,cAQgB,0DAnBnB,GADF,CAuBD,CACD,GAAIH,OAAO,GAAKN,UAAhB,CAA4B,CAC1B,mBAAO,qCAAP,CACD,CACF,C,sBAED,iBAAS,CACP,mBACE,wCACE,KAAC,MAAD,IADF,CAEG,KAAKmB,iBAAL,EAFH,GADF,CAMD,C,uBAtEqBxB,S,EAyExB,cAAeM,CAAAA,SAAf","sourcesContent":["import React, { Component } from 'react';\nimport Header from '../components/Header';\nimport { getFavoriteSongs, removeSong } from '../services/favoriteSongsAPI';\nimport MusicCard from '../components/MusicCard';\nimport '../Style/Favorites.css';\n\nconst carregando = 'Carregando...';\n\nclass Favorites extends Component {\n  constructor() {\n    super();\n    this.state = {\n      ApiResult: [],\n      loading: carregando,\n    };\n  }\n\n  async componentDidMount() {\n    this.setState({ loading: carregando });\n    const result = await getFavoriteSongs();\n    this.setState({ ApiResult: result, loading: 'off' });\n  }\n\n  onChangeHandler = async (__target, musicObject) => {\n    this.setState({ loading: carregando });\n    await removeSong(musicObject);\n    const result = await getFavoriteSongs();\n    this.setState({ ApiResult: result, loading: 'off' });\n  }\n\n  onClickHandler = async () => {\n    const { ApiResult } = this.state;\n    this.setState({ loading: carregando });\n    if (ApiResult.length > 0) {\n      ApiResult.forEach(async (item) => removeSong(item));\n    }\n    this.setState({ ApiResult: [], loading: 'off' });\n  }\n\n  showFavoriteSongs() {\n    const { loading, ApiResult } = this.state;\n    if (loading === 'off') {\n      return (\n        <div id=\"page-favorites\" data-testid=\"page-favorites\">\n          {ApiResult.map((item, index) => (\n            <MusicCard\n              ApiObject={ item }\n              trackId={ item.trackId }\n              key={ index }\n              trackName={ item.trackName }\n              previewUrl={ item.previewUrl }\n              onChange={ this.onChangeHandler }\n              checked=\"checked\"\n            />))}\n          {ApiResult.length !== 0\n            ? (\n              <button\n                id=\"remove-favorites-button\"\n                type=\"button\"\n                onClick={ this.onClickHandler }\n              >\n                Remover favoritas\n              </button>) : <h2>Não há músicas favoritas!</h2>}\n        </div>\n      );\n    }\n    if (loading === carregando) {\n      return <h2>Carregando...</h2>;\n    }\n  }\n\n  render() {\n    return (\n      <>\n        <Header />\n        {this.showFavoriteSongs()}\n      </>\n    );\n  }\n}\n\nexport default Favorites;\n"]},"metadata":{},"sourceType":"module"}